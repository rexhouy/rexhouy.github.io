<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>javascript</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="title" content="javascript"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2015-01-25T14:12+0800"/>
<meta name="author" content="Rex.Houy"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<meta name='viewport' content='width=device-width, initial-scale=1.0'>
<link rel='stylesheet' type='text/css' href='emacs-org-html-style/org-style.css' media='only screen' />
<link rel='stylesheet' type='text/css' href='emacs-org-html-style/org-style-min-640px.css' media='only screen and (min-width: 640px) and (max-width: 960px)' />
<link rel='stylesheet' type='text/css' href='emacs-org-html-style/org-style-max-640px.css' media='only screen and (max-width: 640px)' />
<script src='https://code.jquery.com/jquery-2.1.3.min.js'></script>
<script src='emacs-org-html-style/nav.js'></script>


</head>
<body>

<div id="preamble">

</div>

<div id="content">
<h1 class="title">javascript</h1>


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">new关键字</a></li>
<li><a href="#sec-2">基于对象的继承</a></li>
<li><a href="#sec-3">阻止对对象的修改</a></li>
<li><a href="#sec-4">客户端javascript</a></li>
<li><a href="#sec-5">history</a></li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">new关键字</h2>
<div class="outline-text-2" id="text-1">




<pre class="src src-javascript"><span style="color: #859900;">function</span> <span style="color: #b58900;">A</span><span style="color: #657b83;">()</span> <span style="color: #657b83;">{</span>
 <span style="color: #268bd2;">this</span>.val = 1;
<span style="color: #657b83;">}</span>
<span style="color: #859900;">var</span> <span style="color: #6c71c4;">a</span> = <span style="color: #859900;">new</span> <span style="color: #268bd2;">A</span><span style="color: #657b83;">()</span>;
</pre>

<p>
new关键字调用A的construct函数（隐藏）完成4件事：
</p>
<ol>
<li>创建一个新对象x；

</li>
<li>x._proto_的值设置为A.prototype或Object.prototype;

</li>
<li>调用A.call(x),这时A中的this就绑定到x了；

</li>
<li>如果A没有返回值则返回x，否则返回A的返回值。
</li>
</ol>


</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">基于对象的继承</h2>
<div class="outline-text-2" id="text-2">




<pre class="src src-javascript"><span style="color: #859900;">var</span> <span style="color: #6c71c4;">myObject</span> = Object.create<span style="color: #657b83;">(</span>object<span style="color: #657b83;">)</span>;
</pre>


</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3">阻止对对象的修改</h2>
<div class="outline-text-2" id="text-3">

<p>阻止拓展
</p>


<pre class="src src-javascript">Object.preventExtension<span style="color: #657b83;">(</span>obj<span style="color: #657b83;">)</span>;
</pre>

<p>
禁止拓展和删除属性
</p>


<pre class="src src-javascript">Object.seal<span style="color: #657b83;">(</span>obj<span style="color: #657b83;">)</span>;
</pre>

<p>
完全冻结
</p>


<pre class="src src-javascript">Object.freeze<span style="color: #657b83;">(</span>obj<span style="color: #657b83;">)</span>;
</pre>


</div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4">客户端javascript</h2>
<div class="outline-text-2" id="text-4">

<p>通过设置document.domain为主域名可以使不同子域名下的网站不受同源策略限制
</p></div>

</div>

<div id="outline-container-5" class="outline-2">
<h2 id="sec-5">history</h2>
<div class="outline-text-2" id="text-5">

<p>record the state for an ajax call. this will change the url of browser.
</p>



<pre class="src src-javascript">window.history.pushState<span style="color: #657b83;">(</span>&#8220;object or string&#8221;, &#8220;Title&#8221;, &#8220;/<span style="color: #859900;">new</span>-url&#8221;<span style="color: #657b83;">)</span>;
</pre>


<p>
change the state of current. this will change the url of browser.
</p>


<pre class="src src-javascript">window.history.replaceState<span style="color: #657b83;">(</span>&#8220;object or string&#8221;, &#8220;Title&#8221;, &#8220;/another-<span style="color: #859900;">new</span>-url&#8221;<span style="color: #657b83;">)</span>;
</pre>



<pre class="src src-javascript"><span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">back</span>
window.history.back<span style="color: #657b83;">()</span>;

<span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">forward</span>
window.history.go<span style="color: #657b83;">(</span>2<span style="color: #657b83;">)</span>;
</pre>

</div>
</div>
</div>

<div id="postamble">
<p class="date">Date: 2015-01-25T14:12+0800</p>
<p class="author">Author: Rex.Houy</p>
<p class="creator"><a href="http://orgmode.org">Org</a> version 7.9.3f with <a href="http://www.gnu.org/software/emacs/">Emacs</a> version 24</p>
<a href="http://validator.w3.org/check?uri=referer">Validate XHTML 1.0</a>

</div>
</body>
</html>
