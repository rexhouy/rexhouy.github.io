<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>tmp</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="title" content="tmp"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2014-12-31T16:41+0800"/>
<meta name="author" content="Rex.Houy"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<link rel="stylesheet" type="text/css" href="org-style.css" media="only screen and (min-device-width: 480px)" /><link rel="stylesheet" type="text/css" href="org-style-phone.css" media="only screen and (max-device-width: 480px)" />


</head>
<body>

<div id="preamble">

</div>

<div id="content">
<h1 class="title">tmp</h1>


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 开发环境使用tjpower域名的配置说明</a>
<ul>
<li><a href="#sec-1-1">1.1 解决方案</a></li>
<li><a href="#sec-1-2">1.2 配置</a>
<ul>
<li><a href="#sec-1-2-1">1.2.1 Hosts</a></li>
<li><a href="#sec-1-2-2">1.2.2 nginx配置</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> 开发环境使用tjpower域名的配置说明</h2>
<div class="outline-text-2" id="text-1">


</div>

<div id="outline-container-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> 解决方案</h3>
<div class="outline-text-3" id="text-1-1">

<ol>
<li>利用hosts文件设定访问tjpower域名时使用的ip地址。
</li>
<li>使用nginx（httpd）作为代理将将请求转发至web容器。
</li>
</ol>

</div>

</div>

<div id="outline-container-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> 配置</h3>
<div class="outline-text-3" id="text-1-2">


</div>

<div id="outline-container-1-2-1" class="outline-4">
<h4 id="sec-1-2-1"><span class="section-number-4">1.2.1</span> Hosts</h4>
<div class="outline-text-4" id="text-1-2-1">

<p>windows的hosts文件位于c:\\windows\system32\drivers\etc
</p>
<p>
将以下配置加入到hosts文件中（注意备份hosts文件）
</p>
<p>
127.0.0.1 m.tjpower.com.cn
</p>
<p>
127.0.0.1 www.tjpower.com.cn
</p>
<p>
修改后（可能需要注销）
</p>


<pre class="src src-bash">ping m.tjpower.com.cn
ping www.tjpower.com.cn
#&#23558;&#20250;&#35775;&#38382;127.0.0.1
</pre>


</div>

</div>

<div id="outline-container-1-2-2" class="outline-4">
<h4 id="sec-1-2-2"><span class="section-number-4">1.2.2</span> nginx配置</h4>
<div class="outline-text-4" id="text-1-2-2">




<pre class="src src-bash">server {
       listen   80;
       server_name m.tjpower.com.cn;
       location / {
                root /ohfresh/version1.0.0/IMP/source/ohfresh/ohfresh/dist;#&#25913;&#20026;&#21069;&#31471;&#39033;&#30446;&#36335;&#24452;
                index  index.html index.htm;
       }
       location /imp {
                proxy_pass   http://127.0.0.1:8080/imp/;
                proxy_set_header  Host  $http_host;
       }
}

server {
        listen       80;
        server_name  www.tjpower.com.cn;
        location /imp {
                 proxy_pass   http://127.0.0.1:8080/imp; #&#25913;&#20026;&#21518;&#31471;&#22320;&#22336;
                 proxy_set_header  Host  $http_host; #&#35774;&#32622;HTTP&#22836;&#20013;&#30340;Host&#20449;&#24687;&#65292;&#36825;&#26679;&#21487;&#20197;&#22312;server&#31471;&#21462;&#21040;&#24403;&#21069;&#22495;&#21517;&#12290;&#65288;&#21487;&#20197;&#19981;&#35774;&#32622;&#65289;
        }
}

</pre>


<p>
*以上配置还可以用于解决系统必须依赖jsonp的问题。
</p></div>
</div>
</div>
</div>
</div>

<div id="postamble">
<p class="date">Date: 2014-12-31T16:41+0800</p>
<p class="author">Author: Rex.Houy</p>
<p class="creator"><a href="http://orgmode.org">Org</a> version 7.9.3f with <a href="http://www.gnu.org/software/emacs/">Emacs</a> version 24</p>
<a href="http://validator.w3.org/check?uri=referer">Validate XHTML 1.0</a>

</div>
</body>
</html>
